.unlock-conditions
  .unlock-condition(ng-repeat="condition in vmUnlocks.conditions")
    .unlock-condition-requirement(ng-class='{"valid" : vmUnlocks.conditionIsValid(condition)}')
      %label Requirement
      %select(ng-model="condition.condition_type" name="condition_type" ng-change="vmUnlocks.changeConditionType(condition)")
        %option(ng-repeat="type in vmUnlocks.conditionTypes" ng-selected="vmUnlocks.conditionsTypeTranslation(type) == condition.condition_type" value="{{vmUnlocks.conditionsTypeTranslation(type)}}")
          {{type}}

    .unlock-condition-parameters(ng-if="condition.condition_type=='Assignment'")
      %label {{ vmUnlocks.termFor("assignment") }}
      %select(ng-model="condition.condition_id" name="condition_id")
        %option(ng-repeat="assignment in vmUnlocks.assignments" ng-selected="assignment.id == condition.condition_id" value="{{assignment.id}}")
          {{assignment.name}}
      %label State Achieved
      %select(ng-model="condition.condition_state")
        %option(ng-repeat="state in vmUnlocks.assignmentStates(condition.condition_id)"  ng-selected="state == condition.condition_state" value="{{state}}")
          {{state}}
      %label Minimum Points Earned
      %input(ng-model="condition.condition_value" gc-number-input)
      %label Completed By Date
      %input(id="{{assignment.id}}-completed-by" ng-model="condition.condition_date" gc-date-time-input)

    .unlock-condition-parameters(ng-if="condition.condition_type=='Badge'")
      %label {{ vmUnlocks.termFor("badge") }}
      %select(ng-model="condition.condition_id" name="condition_id")
        %option(ng-repeat="badge in vmUnlocks.badges" ng-selected="badge.id == condition.condition_id" value="{{badge.id}}")
          {{badge.name}}
      %label Number of Times Earned
      %input(ng-model="condition.condition_value" gc-number-input)
      %label Completed By Date
      %input(id="{{condition.id}}-completed-by" ng-model="condition.condition_date" gc-date-time-input)

    .unlock-condition-parameters(ng-if="condition.condition_type=='Course'")
      %label Minimum Points Earned
      %input(ng-model="condition.condition_value" gc-number-input)
      %label Completed By Date
      %input(id="{{condition.id}}-completed-by" ng-model="condition.condition_date" gc-date-time-input)

    .unlock-condition-parameters(ng-if="condition.condition_type=='AssignmentType'")
      %label {{ vmUnlocks.termFor("assignmentType") }}
      %select(ng-model="condition.condition_id" name="condition_id")
        %option(ng-repeat="assignmentType in vmUnlocks.assignmentTypes" ng-selected="assignmentType.id == condition.condition_id" value="{{assignmentType.id}}")
          {{assignmentType.name}}
      %label State Achieved
      %select(ng-model="condition.condition_state")
        %option(ng-repeat="state in vmUnlocks.assignmentTypeStates"  ng-selected="state == condition.condition_state" value="{{state}}")
          {{state}}
      %label Number (Points or Assignments)
      %input(ng-model="condition.condition_value" gc-number-input)
      %label Completed By Date
      %input(id="{{condition.id}}-completed-by" ng-model="condition.condition_date" gc-date-time-input)
    %button.remove-unlock-condition(ng-click="vmUnlocks.removeCondition($index)")
      %i.fa.fa-fw.fa-times
.box.box-padded.add-unlock-condition-wrapper
  %button.button-link(ng-click="vmUnlocks.addCondition()")
    %i.fa.fa-fw.fa-plus
    Add a Condition
