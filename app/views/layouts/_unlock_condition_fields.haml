.conditions
  .assignment-or-badge
    .form-item
      = f.label :condition_type, "Requirement"
      = f.select :condition_type, [["Assignment Type", "AssignmentType"], "Assignment", "Badge", ["Earned Point Value", "Course"]], :label => "Type", include_blank: true

  .assignment-types-list{:style => "display: none", class: "unlock-conditions-list"}
    .form-item
      = f.input :condition_id, :collection => current_course.assignment_types.order(:name).map { |l| [l.name,l.id] }, :include_blank => true, :label => "#{term_for :assignment} Type", input_html: { :id => "assignment_type_selection" }
    .form-item
      = f.input :condition_state, :collection => ["Assignments Completed", "Minimum Points Earned"], :label => "State Achieved", input_html: { :id => "at_state_achieved" }
    .form-item
      = f.input :condition_value, :label => "Number (Points or Assignments)", :required => true, :input_html => { min: '0', id: "at_amount"}
    .form-item
      = f.input :condition_date, as: :string, :include_blank => true, :input_html => { class: "datetimepicker", id: "at_completed_date" }, :label => "Completed by Date"

  .assignments-list{:style => "display: none", class: "unlock-conditions-list"}
    .assignment-select.form-item{"data-assignment-type" => current_course.assignments.map { |a| {"id" => a.id, "pass_fail" => a.pass_fail} }.to_json}
      = f.input :condition_id, :collection => current_course.assignments.order(:name).map { |l| [l.name,l.id] }, :include_blank => true, :label => "#{term_for :assignment}", input_html: { :id => "assignment_selection" }
    .assignment-state-achieved.form-item
      = f.input :condition_state, :collection => ["Submitted", "Feedback Read", "Grade Earned", "Passed"], :label => "State Achieved", input_html: { :id => "assignment_state_achieved" }
    .form-item
      = f.input :condition_value, :label => "Minimum Points Earned", input_html: { :id => "assignment_min_points" }
    .form-item
      = f.input :condition_date, as: :string, :include_blank => true, :input_html => { class: "datetimepicker", id: "assignment_completed_date" }, :label => "Completed By Date"

  .badges-list{:style => "display: none", class: "unlock-conditions-list"}
    .form-item
      = f.input :condition_id, :collection => current_course.badges.order(:name).map { |l| [l.name, l.id] }, :include_blank => true, :label => "#{term_for :badge}", input_html: { :id => "badge_selection" }
    .form-item
      = f.hidden_field :condition_state, value: "Earned", input_html: { :id => "badge_state_achieved" }
    .form-item
      = f.input :condition_value, :label => "Number of Times Earned", input_html: { :id => "badge_times_earned" }
    .form-item
      = f.input :condition_date, as: :string, :include_blank => true, :input_html => { class: "datetimepicker", id: "badge_completed_date" }, :label => "Completed By Date"

  .earned-point-values-list{:style => "display: none", class: "unlock-conditions-list"}
    .form-item
      = f.hidden_field :condition_id, value: current_course.id
    .form-item
      = f.hidden_field :condition_state, value: "Earned"
    .form-item
      = f.input :condition_value, :label => "Minimum Points Earned", input_html: { :id => "course_min_points" }
    .form-item
      = f.input :condition_date, as: :string, :include_blank => true, :input_html => { class: "datetimepicker", id: "course_completed_date" }, :label => "Completed By Date"

  = f.hidden_field :_destroy, class: "destroy"
  %button.remove-unlock-condition= glyph(:times)
