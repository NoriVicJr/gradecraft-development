- content_for :context_menu do
  .context_menu
    %ul
      %li
        %a{:href => new_assignment_path }
          = glyph(:plus)
          New #{(term_for :assignment).titleize}, class: "button button-edit"

.pageContent
  = render partial: "layouts/alerts"

  .assignments
    - @assignment_types.each do |assignment_type|
      %h3= "#{assignment_type.try(:name)} â€“ #{points assignment_type.total_points} points"
      %table{"aria-describedby" => "assignment-type-#{assignment_type.id}"}
        %thead
          %tr
            %th{scope: "col"} Name
            %th{scope: "col"}
              %span
                %span
                  %i.fa.fa-eye.fa-fw
                .display-on-hover.hover-style
                  Visible to Students
            %th{scope: "col"}
              %span
                !
              .display-on-hover.hover-style
                Required
            %th{scope: "col"}
              %span
                %i.fa.fa-paperclip.fa-fw
              .display-on-hover.hover-style
                Accepts Submissions
            %th{scope: "col"}
              %span
                %i.fa.fa-calendar.fa-fw
              .display-on-hover.hover-style
                Shown in Timeline

            %th{scope: "col"}
              %span
                %i.fa.fa-sliders.fa-fw
              .display-on-hover.hover-style
                Shown in Predictor

            %th{scope: "col"}
              %span
                %i.fa.fa-list.fa-fw
              .display-on-hover.hover-style
                Shown in Due This Week

            %th{scope: "col"}
              %span
                %i.fa.fa-pencil.fa-fw
              .display-on-hover.hover-style
                Logged By Students

            %th{scope: "col"}
              %span
                %i.fa.fa-unlock-alt.fa-fw
              .display-on-hover.hover-style
                Release Required

            %th{scope: "col"} Grade Form Preview
            %th{scope: "col"} Points

            %th{scope: "col"} Dates
            %th{scope: "col", :style => "min-width: 110px"}
              %span.sr-only Actions
        %tbody
          - assignments = assignment_type.assignments.ordered
          - assignments.each do |assignment|
            %tr
              %td= link_to assignment.name, assignment
              %td
                - if assignment.visible?
                  %span
                    %i.fa.fa-eye
                  .display-on-hover.hover-style
                    Visible to Students

              %td
                - if assignment.required?
                  %span
                    Required
                  .display-on-hover.hover-style
                    !
              %td
                - if assignment.accepts_submissions?
                  %span
                    %i.fa.fa-paperclip
                  .display-on-hover.hover-style
                    Accepts Submissions

              %td
                - if assignment.include_in_timeline?
                  %span
                    %i.fa.fa-calendar
                  .display-on-hover.hover-style
                    Shown in Timeline

              %td
                - if assignment.include_in_predictor?
                  %span
                    %i.fa.fa-sliders
                  .display-on-hover.hover-style
                    Shown in Predictor

              %td
                - if assignment.include_in_to_do?
                  %span
                    %i.fa.fa-list.fa-fw
                  .display-on-hover.hover-style
                    Shown in Due This Week

              %td
                - if assignment.student_logged?
                  %span
                    %i.fa.fa-pencil.fa-fw
                  .display-on-hover.hover-style
                    Logged By Students

              %td
                - if assignment.release_necessary?
                  %span
                    %i.fa.fa-unlock-alt.fa-fw
                  .display-on-hover.hover-style
                    Release Required

              %td
                - if assignment.grade_select?
                  %label.sr-only{:for => "score_levels"}
                    Score Levels
                  = select_tag(:assignment_score_levels, options_from_collection_for_select(assignment.assignment_score_levels, :points, :name))
                - elsif assignment.grade_radio?
                  - assignment.assignment_score_levels.each do |asl|
                    = radio_button_tag(asl.name, asl.points)
                    %span.not_bold= label_tag(asl.name)
                    %br
                - elsif assignment.grade_checkboxes?
                  = check_box_tag "score", "", false, :disabled => true
                - else
                  = text_field_tag "score", "", :disabled => true
              %td= points assignment.full_points
              %td
                %ul
                  %li
                    Opens:
                    = assignment.try(:opens_at) || "Always Open"
                  %li
                    Due At:
                    = assignment.try(:due_at) || "No Due Date"
                  %li
                    Accepted Until:
                    = assignment.try(:accepts_submissions_until) || "Always Accepted"
              %td
                .right
                  %ul.button-bar
                    %li= link_to glyph(:edit) + "Edit", edit_assignment_path(assignment), class: "button"
                    %li= link_to glyph(:trash) + "Delete", assignment_path(assignment), data: { confirm: "Are you sure?", method: :delete },  class: "button"
